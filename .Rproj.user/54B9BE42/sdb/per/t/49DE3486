{
    "contents" : "# server.R\nrequire(\"jsonlite\")\nrequire(\"RCurl\")\nrequire(ggplot2)\nrequire(dplyr)\nrequire(shiny)\nrequire(shinydashboard)\nrequire(leaflet)\nrequire(DT)\n\nshinyServer(function(input, output) {\n  \n  dfQ1 <- data.frame(fromJSON(getURL(URLencode(gsub(\"\\n\", \" \", 'skipper.cs.utexas.edu:5001/rest/native/?query=\"\"\"select BUDGEN, YEAR, NAME from RELIGIONS_BY_NATION;\"\"\"')), httpheader=c(DB='jdbc:oracle:thin:@sayonara.microlab.cs.utexas.edu:1521:orcl', USER='C##cs329e_cjs2599', PASS='orcl_cjs2599', MODE='native_mode', MODEL='model', returnDimensions = 'False', returnFor = 'JSON'), verbose = TRUE))) \n  \n  output$QPlot1 <- renderPlot(width=600, height=500, {\n  \n    year_selection <- input$animation\n    \n    dfQ1 <- dfQ1 %>% filter (as.character(NAME) %in% c(\"CHN\", \"JPN\", \"DRV\", \"MYA\", \"THI\"), as.character(YEAR) == year_selection )\n    \n    p1 <- ggplot(dfQ1, aes(x=as.character(NAME), y = as.numeric(as.character(BUDGEN)), fill = NAME))  + ylim(0,170000000) +\n      geom_bar(stat = \"identity\") +\n      labs(title='Buddhist Population by Country') + \n      labs(x=\"Year\", y=\"Buddhist Population\")\n    \n    p1\n  })\n\n  output$QPlot2 <- renderPlot(width=1100, height=500, {\n    \n    dfQ2 <- data.frame(fromJSON(getURL(URLencode(gsub(\"\\n\", \" \", 'skipper.cs.utexas.edu:5001/rest/native/?query=\"\"\"select NONRELIGPCT, YEAR, NAME from RELIGIONS_BY_NATION;\"\"\"')), httpheader=c(DB='jdbc:oracle:thin:@sayonara.microlab.cs.utexas.edu:1521:orcl', USER='C##cs329e_cjs2599', PASS='orcl_cjs2599', MODE='native_mode', MODEL='model', returnDimensions = 'False', returnFor = 'JSON'), verbose = TRUE))); \n    \n    dfQ2 <- dfQ2 %>% filter (as.character(NAME) %in% c(\"RUS\", \"CUB\", \"PRK\", \"CHN\", \"JAM\", \"CZE\", \"FIN\", \"USA\"))\n    \n    p2 <- ggplot(dfQ2, aes(x=as.character(YEAR), y = as.numeric(as.character(NONRELIGPCT)), color = NAME)) + facet_grid(. ~ NAME) +\n      geom_point(stat = \"identity\") +\n      labs(title='Non-religious Fraction of Population by Year and Country') + \n      labs(x=\"Year\", y=\"Non-religious Fraction of Population\")\n    \n    p2\n  })\n  \n})\n",
    "created" : 1449567518194.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2047864842",
    "id" : "49DE3486",
    "lastKnownWriteTime" : 1449567556,
    "path" : "~/DataVisualization/DV_FinalProject/04 Shiny (ui.R and server.R)/QuanShiny/server.R",
    "project_path" : "04 Shiny (ui.R and server.R)/QuanShiny/server.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}